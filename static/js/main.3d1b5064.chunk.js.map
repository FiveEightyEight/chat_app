{"version":3,"sources":["services/firebase.js","components/Snippet.js","components/ChatRoom.js","contexts/AuthContext.js","components/Login.js","components/Message.js","App.js","index.js"],"names":["Object","asyncToGenerator","regenerator_default","a","mark","_callee3","config","getConfig","wrap","_context3","prev","next","_callee","_ref3","data","_context","axios","method","url","headers","tkn","sent","abrupt","apiKey","fb","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","stop","_callee2","_context2","app","initializeApp","Snippet","_ref","username","message","react_default","createElement","className","ChatRoom","chat","Fragment","style","height","concat","window","innerHeight","overflowY","map","e","i","assign","key","AuthContext","React","createContext","Provider","Consumer","Login","props","_useState","useState","_useState2","slicedToArray","setUsername","auth","useContext","htmlFor","type","id","placeholder","value","onChange","target","onKeyDown","trim","length","login","Message","setMessage","send","App","_useState3","_useState4","authStatus","setAuthStatus","_useState5","_useState6","setChat","useEffect","setTimeout","firebase","database","ref","once","then","snapshot","val","on","status","push","child","set","temp","react_router","path","exact","render","component","ReactDOM","react_router_dom","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.3d1b5064.chunk.js","sourcesContent":["import app from 'firebase/app';\nimport axios from 'axios';\nimport 'firebase/database';\n\n( async function () {\n  let config = null;\n  const getConfig = ( async function () {\n    let { data } = await axios({\n      method: 'GET',\n      url: `https://eze-api.herokuapp.com/fb/`,\n      headers: {\n        tkn: 8850,\n      }\n    })\n    return {\n      apiKey: data.fb,\n      authDomain: \"easyeats-a662b.firebaseapp.com\",\n      databaseURL: \"https://easyeats-a662b.firebaseio.com\",\n      projectId: \"easyeats-a662b\",\n      storageBucket: \"easyeats-a662b.appspot.com\",\n      messagingSenderId: \"38887412175\"\n    }\n  }())\n  return await (async function () {\n    if (!config) {\n      config = await getConfig;\n    }\n    return await app.initializeApp(config);\n  }())\n}())\n\nexport default app;","import React from 'react';\n\nexport default (({ username, message }) => {\n    return (\n        <div>\n            <span className=\"badge badge-secondary\">{ username }</span>\n            <span> { message } </span>\n            <hr />\n        </div>\n    );\n})","import React from 'react';\nimport Snippet from './Snippet';\n\nexport default (({ chat }) => {\n    return (\n        <>\n            <div className=\"card\">\n                <div className=\"card-body\" style={{ height: `calc(${window.innerHeight}px - 300px)`, overflowY: 'scroll' }}>\n                    {\n                        (!chat) ? <></>\n                            :\n                            chat.map((e, i) => {\n                                return <Snippet {...e} key={i} />\n                            })\n                    }\n                </div>\n            </div>\n        </>\n    );\n});","import React from 'react'\n\nexport const AuthContext = React.createContext(false);\n\nexport const { Provider, Consumer } = AuthContext;","import React, { useState, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\n\nexport default (props => {\n    const [username, setUsername] = useState('')\n    const auth = useContext(AuthContext);\n\n    const handleChange = e => {\n        setUsername(e.target.value);\n    };\n\n    const onKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            if (username.trim().length <= 0) return;\n            auth.login(username.trim());\n            return;\n        }\n    };\n\n    return (\n        <div className='container mt-5'>\n            <div className='row justify-content-center'>\n                <div className='col col-12 text-center'>\n                    <h3>Who are you?</h3>\n                </div>\n                <div className=\"col-auto\">\n                    <label className=\"sr-only\" htmlFor=\"inlineFormInputGroup\">Username</label>\n                    <div className=\"input-group mb-2\">\n                        <div className=\"input-group-prepend\">\n                            <div className=\"input-group-text\">@</div>\n                        </div>\n                        <input type=\"text\" className=\"form-control\" id=\"inlineFormInputGroup\" placeholder=\"Username\" value={username} onChange={handleChange} onKeyDown={onKeyPress} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n})","\nimport React, { useState, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\n\nexport default (props => {\n    const [message, setMessage] = useState('')\n    const auth = useContext(AuthContext);\n\n    const handleChange = e => {\n        setMessage(e.target.value);\n    };\n\n    const onKeyPress = (e) => {\n        \n        if (e.key === 'Enter') {\n            if (message.trim().length <= 0) return;\n            auth.send(message.trim());\n            setMessage('')\n            return;\n        }\n    };\n\n    return (\n        <div className=\"col-auto\">\n            <label htmlFor=\"exampleFormControlTextarea1\">Message</label>\n            <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"...\" value={message} onChange={handleChange} onKeyDown={onKeyPress}/>\n        </div>\n    );\n})","import React, { useState, useEffect } from 'react';\nimport firebase from './services/firebase';\nimport { Route } from 'react-router-dom';\nimport { Chat, Login, Message } from './components';\nimport { Provider, Consumer } from './contexts/AuthContext';\n\nfunction App() {\n  const [username, setUsername] = useState(null);\n  const [authStatus, setAuthStatus] = useState(null);\n  const [chat, setChat] = useState([]);\n\n\n  useEffect(() => {\n    // when page loads get the firebase chat data and set the chat hook\n    setTimeout(() => {\n      const firebaseRef = firebase.database().ref('/chat/main');\n      firebaseRef.once('value')\n        .then(snapshot => {\n          return snapshot.val();\n        })\n        .then(data => {\n          if (!data) {\n            setChat([])\n            return;\n          } else {\n            setChat(data.chat);\n          }\n        })\n    }, 1000);\n  }, [])\n\n  useEffect(() => {\n    // This is the listener\n    // it will update the local chat when firebase receives an updates\n    setTimeout(() => {\n      const firebaseListener = firebase.database().ref('/chat/main/chat');\n      firebaseListener.on('value', (snapshot) => {\n        setChat(snapshot.val());\n      })\n      // return firebaseListener.off();\n    }, 1500);\n  }, []);\n\n  const updateChat = (message) => {\n    // this should work fine, but problems may occur once many messages are sent\n    if (chat) {\n      chat.push(\n        {\n          username,\n          message: message.trim(),\n        }\n      );\n      firebase.database().ref('/chat').child('main').set({ chat });\n    } else {\n      const temp = [{username, message: message.trim()}];\n      firebase.database().ref('/chat').child('main').set({ chat: temp });\n    }\n  }\n\n  const login = (username) => {\n    setUsername(username)\n    setAuthStatus(true);\n  };\n\n  return (\n    <>\n      <Provider value={{ status: authStatus, login: login, send: updateChat }}>\n        <Consumer>\n          {\n            ({ status }) => {\n              return (!status) ?\n                (\n                  <Login />\n                )\n                :\n                (\n                  <>\n                    <div className='container mt-5'>\n                      <h3 className='text-center'>Your Username: {username}</h3>\n                      <Route path='/' exact render={() => <Chat chat={chat} />} />\n                      <Route path='/' exact component={Message} />\n                    </div>\n                  </>\n                )\n            }\n          }\n        </Consumer>\n      </Provider>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\n\nReactDOM.render(<HashRouter>\n    <App />\n</HashRouter>, document.getElementById('root'));"],"sourceRoot":""}