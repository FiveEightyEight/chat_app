{"version":3,"sources":["services/firebase.js","services/main.js","components/Snippet.js","components/ChatRoom.js","contexts/AuthContext.js","components/Login.js","components/Message.js","App.js","index.js"],"names":["Object","asyncToGenerator","regenerator_default","a","mark","_callee3","config","getConfig","wrap","_context3","prev","next","_callee","_ref3","data","_context","axios","method","url","headers","tkn","sent","abrupt","apiKey","fb","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","stop","_callee2","_context2","app","initializeApp","isImage","includes","react_default","createElement","alt","src","style","maxWidth","href","target","rel","parseString","string","arr","split","i","length","isURL","console","log","Snippet","_ref","username","message","className","ChatRoom","chat","Fragment","id","height","concat","window","innerHeight","overflowY","map","e","assign","key","AuthContext","React","createContext","Provider","Consumer","Login","props","_useState","useState","_useState2","slicedToArray","setUsername","auth","useContext","htmlFor","type","placeholder","value","onChange","onKeyDown","trim","login","Message","setMessage","send","App","_useState3","_useState4","authStatus","setAuthStatus","_useState5","_useState6","setChat","checkChat","useEffect","setTimeout","firebase","database","ref","once","then","snapshot","val","on","objDiv","document","getElementById","scrollTop","scrollHeight","status","push","child","set","temp","react_router","path","exact","render","component","ReactDOM","react_router_dom","src_App"],"mappings":"sQAIEA,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAL,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACIL,EAAS,KACPC,EAAcP,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAA,SAAAQ,IAAA,IAAAC,EAAAC,EAAA,OAAAZ,EAAAC,EAAAK,KAAA,SAAAO,GAAA,cAAAA,EAAAL,KAAAK,EAAAJ,MAAA,cAAAI,EAAAJ,KAAA,EACGK,IAAM,CACzBC,OAAQ,MACRC,IAAG,oCACHC,QAAS,CACPC,IAAK,QALS,cAAAP,EAAAE,EAAAM,KACZP,EADYD,EACZC,KADYC,EAAAO,OAAA,SAQX,CACLC,OAAQT,EAAKU,GACbC,WAAY,iCACZC,YAAa,wCACbC,UAAW,iBACXC,cAAe,6BACfC,kBAAmB,gBAdH,wBAAAd,EAAAe,SAAAlB,KAAAZ,GAFpBS,EAAAE,KAAA,EAmBcX,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAA,SAAA2B,IAAA,OAAA7B,EAAAC,EAAAK,KAAA,SAAAwB,GAAA,cAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,UACPL,EADO,CAAA0B,EAAArB,KAAA,eAAAqB,EAAArB,KAAA,EAEKJ,EAFL,OAEVD,EAFU0B,EAAAX,KAAA,cAAAW,EAAArB,KAAA,EAICsB,IAAIC,cAAc5B,GAJnB,cAAA0B,EAAAV,OAAA,SAAAU,EAAAX,MAAA,wBAAAW,EAAAF,SAAAC,KAAA/B,GAnBd,cAAAS,EAAAa,OAAA,SAAAb,EAAAY,MAAA,wBAAAZ,EAAAqB,SAAAzB,KAAAL,GA2BaiC,QAAf,0BCfME,EAAU,SAACjB,GAEb,OAAIA,EAAIkB,SAAS,QACNC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WAChDxB,EAAIkB,SAAS,QACbC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WAChDxB,EAAIkB,SAAS,SACbC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WACjDxB,EAAIkB,SAAS,QACZC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WACjDxB,EAAIkB,SAAS,SACZC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WAChDxB,EAAIkB,SAAS,SACbC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WAChDxB,EAAIkB,SAAS,QACbC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WAChDxB,EAAIkB,SAAS,QACbC,EAAAlC,EAAAmC,cAAA,OAAKC,IAAI,WAAWC,IAAKtB,EAAKuB,MAAO,CAACC,SAAU,WAEhDL,EAAAlC,EAAAmC,cAAA,KAAGK,KAAMzB,EAAK0B,OAAO,SAASC,IAAI,uBAAuB3B,IAIzD4B,EApCK,SAACC,GAEjB,IADA,IAAIC,EAAMD,EAAOE,MAAM,KACdC,EAAI,EAAGA,EAAIF,EAAIG,OAAQD,IACxBE,IAAMJ,EAAIE,KACVG,QAAQC,IAAIN,GACZA,EAAIE,GAAKf,EAAQa,EAAIE,KAErBF,EAAIE,GAAMb,EAAAlC,EAAAmC,cAAA,gBAAQU,EAAIE,GAAZ,KAGlB,OAAOF,GCVKO,EAAA,SAAAC,GAA2B,IAAxBC,EAAwBD,EAAxBC,SAAUC,EAAcF,EAAdE,QACzB,OACIrB,EAAAlC,EAAAmC,cAAA,WACID,EAAAlC,EAAAmC,cAAA,QAAMqB,UAAU,yBAA0BF,GAC1CpB,EAAAlC,EAAAmC,cAAA,gBAASQ,EAAYY,GAArB,KACArB,EAAAlC,EAAAmC,cAAA,aCLIsB,EAAA,SAAAJ,GAAc,IAAXK,EAAWL,EAAXK,KACf,OACIxB,EAAAlC,EAAAmC,cAAAD,EAAAlC,EAAA2D,SAAA,KACIzB,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,QACXtB,EAAAlC,EAAAmC,cAAA,OAAKyB,GAAG,cAAcJ,UAAU,YAAYlB,MAAO,CAAEuB,OAAM,QAAAC,OAAUC,OAAOC,YAAjB,eAA2CC,UAAW,WAEvGP,EAEEA,EAAKQ,IAAI,SAACC,EAAGpB,GACT,OAAOb,EAAAlC,EAAAmC,cAACiB,EAADvD,OAAAuE,OAAA,GAAaD,EAAb,CAAgBE,IAAKtB,OAH1Bb,EAAAlC,EAAAmC,cAAAD,EAAAlC,EAAA2D,SAAA,UCPrBW,EAAcC,IAAMC,eAAc,GAEhCC,EAAuBH,EAAvBG,SAAUC,EAAaJ,EAAbI,SCDTC,EAAA,SAAAC,GAAS,IAAAC,EACWC,mBAAS,IADpBC,EAAAlF,OAAAmF,EAAA,EAAAnF,CAAAgF,EAAA,GACdvB,EADcyB,EAAA,GACJE,EADIF,EAAA,GAEfG,EAAOC,qBAAWb,GAcxB,OACIpC,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,kBACXtB,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,8BACXtB,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,0BACXtB,EAAAlC,EAAAmC,cAAA,2BAEJD,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,YACXtB,EAAAlC,EAAAmC,cAAA,SAAOqB,UAAU,UAAU4B,QAAQ,wBAAnC,YACAlD,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,oBACXtB,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,uBACXtB,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,oBAAf,MAEJtB,EAAAlC,EAAAmC,cAAA,SAAOkD,KAAK,OAAO7B,UAAU,eAAeI,GAAG,uBAAuB0B,YAAY,WAAWC,MAAOjC,EAAUkC,SAxB7G,SAAArB,GACjBc,EAAYd,EAAE1B,OAAO8C,QAuBiIE,UApBvI,SAACtB,GAChB,GAAc,UAAVA,EAAEE,SAAN,CACI,GAAIf,EAASoC,OAAO1C,QAAU,EAAG,OACjCkC,EAAKS,MAAMrC,EAASoC,iBCVhBE,EAAA,SAAAhB,GAAS,IAAAC,EACSC,mBAAS,IADlBC,EAAAlF,OAAAmF,EAAA,EAAAnF,CAAAgF,EAAA,GACdtB,EADcwB,EAAA,GACLc,EADKd,EAAA,GAEfG,EAAOC,qBAAWb,GAgBxB,OACIpC,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,YACXtB,EAAAlC,EAAAmC,cAAA,SAAOiD,QAAQ,+BAAf,WACAlD,EAAAlC,EAAAmC,cAAA,SAAOqB,UAAU,+BAA+B6B,KAAK,OAAOC,YAAY,MAAMC,MAAOhC,EAASiC,SAjBjF,SAAArB,GACjB0B,EAAW1B,EAAE1B,OAAO8C,QAgBsGE,UAb3G,SAACtB,GAEhB,GAAc,UAAVA,EAAEE,IAAiB,CACnB,GAAId,EAAQmC,OAAO1C,QAAU,EAAG,OAGhC,OAFAkC,EAAKY,KAAKvC,EAAQmC,aAClBG,EAAW,UC8ERE,MAzFf,WAAe,IAAAlB,EACmBC,mBAAS,MAD5BC,EAAAlF,OAAAmF,EAAA,EAAAnF,CAAAgF,EAAA,GACNvB,EADMyB,EAAA,GACIE,EADJF,EAAA,GAAAiB,EAEuBlB,mBAAS,MAFhCmB,EAAApG,OAAAmF,EAAA,EAAAnF,CAAAmG,EAAA,GAENE,EAFMD,EAAA,GAEME,EAFNF,EAAA,GAAAG,EAGWtB,mBAAS,IAHpBuB,EAAAxG,OAAAmF,EAAA,EAAAnF,CAAAuG,EAAA,GAGN1C,EAHM2C,EAAA,GAGAC,EAHAD,EAAA,GAIPE,EAAc7C,EAAOA,EAAKV,OAAO,KAyDvC,OAtDAwD,oBAAU,WAERC,WAAW,WACWC,EAASC,WAAWC,IAAI,cAChCC,KAAK,SACdC,KAAK,SAAAC,GACJ,OAAOA,EAASC,QAEjBF,KAAK,SAAAnG,GAKF2F,EAJG3F,EAIKA,EAAK+C,KAHL,MAQWgD,EAASC,WAAWC,IAAI,mBAChCK,GAAG,QAAS,SAACF,GAC5BT,EAAQS,EAASC,UAElB,MACF,IAEHR,oBAAU,WAGR,IAAMU,EAASC,SAASC,eAAe,eAClCF,IACLA,EAAOG,UAAYH,EAAOI,eACzB,CAACf,EAAWjD,IAwBbpB,EAAAlC,EAAAmC,cAAAD,EAAAlC,EAAA2D,SAAA,KACEzB,EAAAlC,EAAAmC,cAACsC,EAAD,CAAUc,MAAO,CAAEgC,OAAQrB,EAAYP,MAP7B,SAACrC,GACb2B,EAAY3B,GACZ6C,GAAc,IAKyCL,KAvBtC,SAACvC,GAElB,GAAIG,EACFA,EAAK8D,KACH,CACElE,WACAC,QAASA,EAAQmC,SAGrBgB,EAASC,WAAWC,IAAI,SAASa,MAAM,QAAQC,IAAI,CAAEhE,aAChD,CACL,IAAMiE,EAAO,CAAC,CAAErE,WAAUC,QAASA,EAAQmC,SAC3CgB,EAASC,WAAWC,IAAI,SAASa,MAAM,QAAQC,IAAI,CAAEhE,KAAMiE,QAYzDzF,EAAAlC,EAAAmC,cAACuC,EAAD,KAEI,SAAArB,GACE,OADcA,EAAbkE,OAOGrF,EAAAlC,EAAAmC,cAAAD,EAAAlC,EAAA2D,SAAA,KACEzB,EAAAlC,EAAAmC,cAAA,OAAKqB,UAAU,kBACbtB,EAAAlC,EAAAmC,cAAA,MAAIqB,UAAU,eAAd,kBAA4CF,GAC5CpB,EAAAlC,EAAAmC,cAACyF,EAAA,EAAD,CAAOC,KAAK,IAAIC,OAAK,EAACC,OAAQ,kBAAM7F,EAAAlC,EAAAmC,cAACsB,EAAD,CAAMC,KAAMA,OAChDxB,EAAAlC,EAAAmC,cAACyF,EAAA,EAAD,CAAOC,KAAK,IAAIC,OAAK,EAACE,UAAWpC,MARrC1D,EAAAlC,EAAAmC,cAACwC,EAAD,WCnElBsD,IAASF,OAAO7F,EAAAlC,EAAAmC,cAAC+F,EAAA,EAAD,KACZhG,EAAAlC,EAAAmC,cAACgG,EAAD,OACWhB,SAASC,eAAe","file":"static/js/main.f2c570ac.chunk.js","sourcesContent":["import app from 'firebase/app';\nimport axios from 'axios';\nimport 'firebase/database';\n\n( async function () {\n  let config = null;\n  const getConfig = ( async function () {\n    let { data } = await axios({\n      method: 'GET',\n      url: `https://eze-api.herokuapp.com/fb/`,\n      headers: {\n        tkn: 8850,\n      }\n    })\n    return {\n      apiKey: data.fb,\n      authDomain: \"easyeats-a662b.firebaseapp.com\",\n      databaseURL: \"https://easyeats-a662b.firebaseio.com\",\n      projectId: \"easyeats-a662b\",\n      storageBucket: \"easyeats-a662b.appspot.com\",\n      messagingSenderId: \"38887412175\"\n    }\n  }())\n  return await (async function () {\n    if (!config) {\n      config = await getConfig;\n    }\n    return await app.initializeApp(config);\n  }())\n}())\n\nexport default app;","import React from 'react';\nimport isURL from 'validator/lib/isURL';\n\nconst parseString = (string) => {\n    let arr = string.split(' ');\n    for (let i = 0; i < arr.length; i++) {\n        if (isURL(arr[i])) {\n            console.log(arr)\n            arr[i] = isImage(arr[i])\n        } else {\n            arr[i] = (<span> {arr[i]} </span>);\n        }\n    };\n    return arr;\n};\n\nconst isImage = (url) => {\n\n    if (url.includes('.gif')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    } else if (url.includes('.png')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    } else if (url.includes('.jpeg')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    }else if (url.includes('.bmp')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    }else if (url.includes('.webp')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    } else if (url.includes('.apng')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    } else if (url.includes('.svg')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    } else if (url.includes('.jpg')) {\n        return(<img alt='user img' src={url} style={{maxWidth: '300px'}}/>)\n    } else {\n        return(<a href={url} target='_blank' rel='noopener noreferrer'>{url}</a>)\n    }\n}\n\nexport default parseString;\n/*\nJPEG\nGIF, including animated GIFs\nPNG\nAPNG\nSVG\nBMP\nBMP ICO\nPNG ICO\nWebP\n*/","import React from 'react';\nimport parseString from '../services/main';\n\nexport default (({ username, message }) => {\n    return (\n        <div>\n            <span className=\"badge badge-secondary\">{ username }</span>\n            <span> { parseString(message) } </span>\n            <hr />\n        </div>\n    );\n})","import React from 'react';\nimport Snippet from './Snippet';\n\nexport default (({ chat }) => {\n    return (\n        <>\n            <div className=\"card\">\n                <div id='chat_window' className=\"card-body\" style={{ height: `calc(${window.innerHeight}px - 300px)`, overflowY: 'scroll' }}>\n                    {\n                        (!chat) ? <></>\n                            :\n                            chat.map((e, i) => {\n                                return <Snippet {...e} key={i} />\n                            })\n                    }\n                </div>\n            </div>\n        </>\n    );\n});","import React from 'react'\n\nexport const AuthContext = React.createContext(false);\n\nexport const { Provider, Consumer } = AuthContext;","import React, { useState, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\n\nexport default (props => {\n    const [username, setUsername] = useState('')\n    const auth = useContext(AuthContext);\n\n    const handleChange = e => {\n        setUsername(e.target.value);\n    };\n\n    const onKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            if (username.trim().length <= 0) return;\n            auth.login(username.trim());\n            return;\n        }\n    };\n\n    return (\n        <div className='container mt-5'>\n            <div className='row justify-content-center'>\n                <div className='col col-12 text-center'>\n                    <h3>Who are you?</h3>\n                </div>\n                <div className=\"col-auto\">\n                    <label className=\"sr-only\" htmlFor=\"inlineFormInputGroup\">Username</label>\n                    <div className=\"input-group mb-2\">\n                        <div className=\"input-group-prepend\">\n                            <div className=\"input-group-text\">@</div>\n                        </div>\n                        <input type=\"text\" className=\"form-control\" id=\"inlineFormInputGroup\" placeholder=\"Username\" value={username} onChange={handleChange} onKeyDown={onKeyPress} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n})","\nimport React, { useState, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\n\nexport default (props => {\n    const [message, setMessage] = useState('')\n    const auth = useContext(AuthContext);\n\n    const handleChange = e => {\n        setMessage(e.target.value);\n    };\n\n    const onKeyPress = (e) => {\n        \n        if (e.key === 'Enter') {\n            if (message.trim().length <= 0) return;\n            auth.send(message.trim());\n            setMessage('')\n            return;\n        }\n    };\n\n    return (\n        <div className=\"col-auto\">\n            <label htmlFor=\"exampleFormControlTextarea1\">Message</label>\n            <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"...\" value={message} onChange={handleChange} onKeyDown={onKeyPress}/>\n        </div>\n    );\n})","import React, { useState, useEffect } from 'react';\nimport firebase from './services/firebase';\nimport { Route } from 'react-router-dom';\nimport { Chat, Login, Message } from './components';\nimport { Provider, Consumer } from './contexts/AuthContext';\n\nfunction App() {\n  const [username, setUsername] = useState(null);\n  const [authStatus, setAuthStatus] = useState(null);\n  const [chat, setChat] = useState([]);\n  const checkChat = ((chat)? chat.length:null);\n\n\n  useEffect(() => {\n    // when page loads get the firebase chat data and set the chat hook\n    setTimeout(() => {\n      const firebaseRef = firebase.database().ref('/chat/main');\n      firebaseRef.once('value')\n        .then(snapshot => {\n          return snapshot.val();\n        })\n        .then(data => {\n          if (!data) {\n            setChat([])\n            return;\n          } else {\n            setChat(data.chat);\n          }\n        })\n      // This is the listener\n      // it will update the local chat when firebase receives an updates\n      const firebaseListener = firebase.database().ref('/chat/main/chat');\n      firebaseListener.on('value', (snapshot) => {\n        setChat(snapshot.val());\n      })\n    }, 1000);\n  }, [])\n\n  useEffect(() => {\n    // Scrolls to the bottom of the chat window\n    // Runs only when the chat array grows or when the user first enters their username\n    const objDiv = document.getElementById(\"chat_window\");\n    if (!objDiv) return;\n    objDiv.scrollTop = objDiv.scrollHeight;\n  }, [checkChat, username])\n\n  const updateChat = (message) => {\n    // this should work fine, but problems may occur once many messages are sent\n    if (chat) {\n      chat.push(\n        {\n          username,\n          message: message.trim(),\n        }\n      );\n      firebase.database().ref('/chat').child('main').set({ chat });\n    } else {\n      const temp = [{ username, message: message.trim() }];\n      firebase.database().ref('/chat').child('main').set({ chat: temp });\n    }\n  }\n\n  const login = (username) => {\n    setUsername(username)\n    setAuthStatus(true);\n  };\n\n  return (\n    <>\n      <Provider value={{ status: authStatus, login: login, send: updateChat }}>\n        <Consumer>\n          {\n            ({ status }) => {\n              return (!status) ?\n                (\n                  <Login />\n                )\n                :\n                (\n                  <>\n                    <div className='container mt-5'>\n                      <h3 className='text-center'>Your Username: {username}</h3>\n                      <Route path='/' exact render={() => <Chat chat={chat} />} />\n                      <Route path='/' exact component={Message} />\n                    </div>\n                  </>\n                )\n            }\n          }\n        </Consumer>\n      </Provider>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\n\nReactDOM.render(<HashRouter>\n    <App />\n</HashRouter>, document.getElementById('root'));"],"sourceRoot":""}